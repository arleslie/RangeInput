!function(a){function d(a,b){var c=parseInt(a.css(b),10);if(c)return c;var d=a[0].currentStyle;return d&&d.width&&parseInt(d.width,10)}function e(a){var b=a.data("events");return b&&b.onSlide}function f(b,c){function t(a,d,e){if(void 0!==d){var i="click"==a.type,j=i?c.speed:0,k=i?function(){a.type="change",r.trigger(a,[e])}:null,l=h.offset().left,o=h.width(),p=d-l;if(0>p)return b.val(0),m.animate({left:0-m.width()/2},j,k),n.width(0),!1;if(p>o)return b.val(c.max),m.animate({left:o-m.width()/2},j,k),n.width(o),!1;e=p*c.max/o,b.val(e),m.animate({left:p-m.width()/2},j,k),n.width(p)}else{var l=h.offset().left,o=h.width();if(0>e)return b.val(0),m.animate({left:0-m.width()/2},1),n.width(0),!1;if(p>o)return b.val(c.max),m.animate({left:o-m.width()/2},1),n.width(o),!1;var q=100*e/c.max;q=q*o/100,q-=m.width()/2,b.val(e),m.animate({left:q-m.width()/2},1),n.width(q)}return f}function u(){k=d(h,"width")-d(m,"width"),j=h.offset().left}function v(){u(),f.setValue(void 0!==c.value?c.value:c.min)}var i,j,k,f=this,g=c.css,h=a("<div><div/><a href='#'/></div>").data("rangeinput",f);b.before(h);var m=h.addClass(g.slider).find("a").addClass(g.handle),n=h.find("div").addClass(g.progress);if(a.each("min,max,step,value".split(","),function(a,d){var e=b.attr(d);parseFloat(e)&&(c[d]=parseFloat(e,10))}),c.max-c.min,"range"==b.attr("type")){var p=b.clone().wrap("<div/>").parent().html(),q=a(p.replace(/type/i,"type=text data-orig-type"));q.val(c.value),b.replaceWith(q),b=q}b.addClass(g.input);var r=a(f).add(b),s=!0;a.extend(f,{getValue:function(){return b.val()},setValue:function(a,b){return u(),void 0===b&&(b=jQuery.Event("change")),b.preventDefault(),t(b,void 0,a,!0)},getConf:function(){return c},getProgress:function(){return n},getHandle:function(){return m},getInput:function(){return b},stepUp:function(a){return f.step(a||1)},stepDown:function(a){return f.step(-a||-1)},setMax:function(a){return c.max=a,c.max},setMin:function(a){return c.min=a,c.min}}),a.each("onSlide,change".split(","),function(b,d){a.isFunction(c[d])&&a(f).on(d,c[d])}),m.drag({drag:!1}).on("dragStart",function(){u(),s=e(a(f))||e(b)}).on("drag",function(c,d,e){return b.is(":disabled")?!1:(t(c,e),a(f).trigger("onSlide"),void 0)}).on("dragEnd",function(a){a.isDefaultPrevented()||(a.type="change",r.trigger(a,[i]))}).click(function(a){return a.preventDefault()}),h.click(function(d){if(b.is(":disabled")||d.target==m[0])return!1;u();var e=h.width(),g=h.offset().left,i=d.pageX-g;return m.css("left",i-m.width()/2),n.css("width",i),b.val(i*c.max/e),a(f).trigger("change"),d}),c.keyboard&&b.keydown(function(c){if(!b.attr("readonly")){var d=c.keyCode,e=-1!=a([75,76,38,33,39]).index(d),g=-1!=a([74,72,40,34,37]).index(d);return!e&&!g||c.shiftKey||c.altKey||c.ctrlKey?void 0:(e?f.step(33==d?10:1,c):g&&f.step(34==d?-10:-1,c),c.preventDefault())}}),b.blur(function(b){var c=a(this).val();c!==i&&f.setValue(c,b)}),a.extend(b[0],{stepUp:f.stepUp,stepDown:f.stepDown}),v(),k||a(window).load(v)}var b,c;a.fn.drag=function(d){return document.ondragstart=function(){return!1},d=a.extend({x:!0,y:!0,drag:!0},d),b=b||a(document).on("mousedown mouseup",function(e){var f=a(e.target);if("mousedown"==e.type&&f.data("drag")){var g=f.offset(),h=e.pageX-g.left,i=e.pageY-g.top,j=!0;b.on("mousemove.drag",function(a){var b=a.pageX-h,e=a.pageY-i,g={};d.x&&(g.left=b),d.y&&(g.top=e),j&&(f.trigger("dragStart"),j=!1),d.drag&&f.css(g),f.trigger("drag",[e,b]),c=f}),e.preventDefault()}else try{c&&c.trigger("dragEnd")}finally{b.off("mousemove.drag"),c=null}}),this.data("drag",!0)},a.expr[":"].range=function(b){var c=b.getAttribute("type");return c&&"range"==c||!!a(b).filter("input").data("rangeinput")},a.fn.rangeinput=function(b){if(this.data("rangeinput"))return this;b=a.extend(!0,{},tool.conf,b);var c;return this.each(function(){var d=new f(a(this),a.extend(!0,{},b));c=c?c.add(d):d}),c?c:this}}(jQuery);